<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/MenuView.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: views/MenuView.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @class Class to help coordinate the view of unit selection screen
 */
var MenuView = new Class( /** @lends MenuView.prototype */ {
	Extends: View,
	
	/**
	 * Constructor
	 * @param {Controller} controller control this view
	 */
	initialize: function(controller) {
		this.controller = controller;
	
		// the current unit being viewed
		this.currentUnit = 0;
	},
	
	/**
	 * Destructor
	 */
	finalize: function () {
	},
	
	/**
	 * Draw everything on the screen
	 */
	draw: function () {

		// Call helper functionsthe to draw components
		this.drawTitle();
		this.drawHomeButton();
		this.drawArrows();
		this.drawGroups();
		
		// redraw all widgets
		app.stage.draw();
	},

	/**
	 * Draw the title
	 */
	drawTitle: function() {
		var title = new Kinetic.Image({image: this.images.numerousTitle});
		widgetUtil.glue(title, {
			width: 0.35,
			height: 0.1,
			dx: 0.31,
			dy: 0.05
		});
		app.layer.add(title);
	},

	/**
	 * Draw the button for backing to home screen
	 */
	drawHomeButton: function() {
		var button = new Kinetic.Image({image: this.images.homeButton});
		widgetUtil.glue(button, {
			width: 0.11,
			height: 0.12,
			dx: 0.05,
			dy: 0.05
		});
		app.layer.add(button);
		
		button.on('click tap', function () {
			music.play(app.view.sounds.select);
			app.controller.home()
		});
	},

	/**
	 * Draw the arrows for switch units
	 */
	drawArrows: function() {
		this.arrowLeft = new Kinetic.Image({image: this.images.arrowLeft});
		widgetUtil.glue(this.arrowLeft, {
			width: 0.1,
			height: 0.22,
			dx: 0.1,
			dy: 0.5
		});
		app.layer.add(this.arrowLeft);
		
		this.arrowRight = new Kinetic.Image({image: this.images.arrowRight});
		widgetUtil.glue(this.arrowRight, {
			width: 0.1,
			height: 0.22,
			dx: 0.8,
			dy: 0.5
		});
		app.layer.add(this.arrowRight);
		
		this.arrowLeft.on('click tap', function () {
			music.play(app.view.sounds.select);
			this.moveToTop();
			app.stage.draw();
			app.view.left();
		});
		this.arrowRight.on('click tap', function () {
			music.play(app.view.sounds.select);
			this.moveToTop();
			app.stage.draw();
			app.view.right();
		});
		
		this.arrowLeft.hide();
	},

	drawGroups: function() {
		this.unitsGroupArray = [];
		this.animations = [];
		var period = 1000;
		for(var i = 0; i &lt; app.UNIT_GAMES.length; i++) {
			this.unitsGroupArray[i] = new Kinetic.Group({});
			
			var myLabel = new Kinetic.Image({image: this.images.unitLabels[i]});
			widgetUtil.glue(myLabel, {
				width: 0.35,
				height: 0.12,
				dx: 0.3,
				dy: 0.15
			});
			this.unitsGroupArray[i].add(myLabel);
			
			var myButton = new Kinetic.Image({image: this.images.unitPlayButtons[i]});
			widgetUtil.glue(myButton, {
				width: 0.3,
				height: 0.43,
				dx: 0.33,
				dy: 0.37
			});
			
			// Need to edit when the unit name is changed
			myButton.on('click tap', function () {
				music.play(app.view.sounds.select);
				app.controller.unitSelect(app.view.currentUnit);
			});
			

				
			this.unitsGroupArray[i].add(myButton);
			app.layer.add(this.unitsGroupArray[i]);
			this.unitsGroupArray[i].hide();
		}

		this.unitsGroupArray[0].show();
	},


	left: function () {
		var preUnit = this.currentUnit-1;
		var preGroup = this.unitsGroupArray[preUnit];
		var currentGroup = this.unitsGroupArray[this.currentUnit];
		
		preGroup.setOpacity(0);
		preGroup.setX(dimensionUtil.decimalToActualWidth(-0.35));
		preGroup.show();
		
		var tweenIn = new Kinetic.Tween({
			node: preGroup,
			duration: 0.5,
			x: 0,
			opacity: 1
		});
		tweenIn.play();
		
		var tweenOut = new Kinetic.Tween({
			node: currentGroup,
			duration: 0.5,
			x: dimensionUtil.decimalToActualWidth(0.35),
			opacity: 0,
			//Check
			onFinish: function () {
				currentGroup.hide();
			}
		});
		tweenOut.play();
		this.currentUnit--;
		
		this.hideArrows();
	},

	right: function () {
		var nextUnit = this.currentUnit+1;
		var nextGroup = this.unitsGroupArray[nextUnit];
		var currentGroup = this.unitsGroupArray[this.currentUnit];
		
		nextGroup.setOpacity(0);
		nextGroup.setX(dimensionUtil.decimalToActualWidth(0.35));
		nextGroup.show();
		
		var tweenIn = new Kinetic.Tween({
			node: nextGroup,
			duration: 0.5,
			x: 0,
			opacity: 1
		});
		tweenIn.play();
		
		var tweenOut = new Kinetic.Tween({
			node: currentGroup,
			duration: 0.5,
			x: dimensionUtil.decimalToActualWidth(-0.35),
			opacity: 0,
			//Check
			onFinish: function () {
				currentGroup.hide();
			}
		});
		tweenOut.play();
		this.currentUnit++;
		
		this.hideArrows();
	},

	hideArrows: function() {
		if (this.currentUnit == 0) {
			this.arrowLeft.hide();
		} else if (this.currentUnit == app.UNIT_GAMES.length-1) {
			this.arrowRight.hide();
		} else {
			this.arrowLeft.show();
			this.arrowRight.show();
		}
		
	},
	
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="AdditionGameController.html">AdditionGameController</a></li><li><a href="AdditionGameHelper.html">AdditionGameHelper</a></li><li><a href="AdditionGameView.html">AdditionGameView</a></li><li><a href="App.html">App</a></li><li><a href="ArrayUtil.html">ArrayUtil</a></li><li><a href="BrowserMusic.html">BrowserMusic</a></li><li><a href="DimensionUtil.html">DimensionUtil</a></li><li><a href="Env.html">Env</a></li><li><a href="GroupingGame2Controller.html">GroupingGame2Controller</a></li><li><a href="GroupingGame3Controller.html">GroupingGame3Controller</a></li><li><a href="GroupingGameController.html">GroupingGameController</a></li><li><a href="GroupingGameView.html">GroupingGameView</a></li><li><a href="HomeController.html">HomeController</a></li><li><a href="HomeView.html">HomeView</a></li><li><a href="KeyboardTextsGenerator.html">KeyboardTextsGenerator</a></li><li><a href="LoaderUtil.html">LoaderUtil</a></li><li><a href="MathUtil.html">MathUtil</a></li><li><a href="MenuController.html">MenuController</a></li><li><a href="MenuUnitController.html">MenuUnitController</a></li><li><a href="MenuUnitView.html">MenuUnitView</a></li><li><a href="MenuView.html">MenuView</a></li><li><a href="Music.html">Music</a></li><li><a href="OptionsController.html">OptionsController</a></li><li><a href="OptionsView.html">OptionsView</a></li><li><a href="PhonegapMusic.html">PhonegapMusic</a></li><li><a href="Practice1Controller.html">Practice1Controller</a></li><li><a href="Practice2Controller.html">Practice2Controller</a></li><li><a href="Practice3Controller.html">Practice3Controller</a></li><li><a href="PracticeView.html">PracticeView</a></li><li><a href="SpeechUtil.html">SpeechUtil</a></li><li><a href="Storage.html">Storage</a></li><li><a href="TemplateController.html">TemplateController</a></li><li><a href="TemplateModel.html">TemplateModel</a></li><li><a href="TemplateView.html">TemplateView</a></li><li><a href="UnitRecordsModel.html">UnitRecordsModel</a></li><li><a href="View.html">View</a></li><li><a href="WidgetUtil.html">WidgetUtil</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Thu Sep 26 2013 20:16:07 GMT+1200 (NZST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
